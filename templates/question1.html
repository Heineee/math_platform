<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Permutation Problem</title>
<link rel="stylesheet" href="/static/css/question.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>


<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="/static/picture/logo.png" alt="Logo" width="100">
                <div class="title-container"> <!-- 新的容器 -->
                    <h1 class="site-name">Mathnexus</h1> <!-- 大标题 -->
                    <h3 class="subtitle">COMPUTING, EXERCISE AND COMMUNICATION</h3> <!-- 小标题 -->
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="/myApp/homepage/">主页</a></li>
                <li class="dropdown">
                    <a href="/myApp/matrix_compute/" class="dropbtn">科学计算器</a>
                    <div class="dropdown-content">
                        <a href="/myApp/function_progress/">微积分</a>
                        <a href="/myApp/plot/">绘图</a>
                        <a href="/myApp/matrix_compute/">矩阵计算</a>
                    </div>
                </li>
                <li><a href="/myApp/challenges/">刷题挑战</a></li>
                <li><a href="/myApp/forum/">讨论区</a></li>
                <li><a href="/myApp/trending/">热门榜</a></li>
                <li><a href="/myApp/resources/">其他相关网站</a></li>
                <li><a href="/myApp/profile/s">个人中心</a></li>
            </ul><br>
        </nav>
    </header>

    <h2>Permutation Problem</h2>
<p>  A permutation \(\pi\) of \(\{1, \dots, n\}\) can be represented in <b>one-line notation</b> as \(\pi(1),\ldots,\pi(n)\). If all \(n!\) permutations are written in lexicographic order then \(\textrm{rank}(\pi)\) is the position of \(\pi\) in this 1-based list.</p>

<p>  For example, \(\text{rank}(2,1,3) = 3\) because the six permutations of \(\{1, 2, 3\}\) in lexicographic order are:
\[1, 2, 3 \quad 1, 3, 2 \quad 2, 1, 3 \quad 2, 3, 1 \quad 3, 1, 2 \quad 3, 2, 1\]
</p>

<p>For a positive integer \(m\), we define the following permutation of \(\{1, \dots, n\}\) with \(n = \frac{m(m+1)}{2}\):
\[
\begin{align}
\sigma(i) &= \begin{cases} \frac{k(k-1)}{2} + 1 & \textrm{if } i = \frac{k(k + 1)}{2}\textrm{ for }k\in\{1, \dots, m\};\\i + 1 & \textrm{otherwise};\end{cases}\\
\tau(i) &= ((10^9 + 7)i \bmod n) + 1\\
\pi(i) &= \tau^{-1}(\sigma(\tau(i)))
\end{align}
\]
where \(\tau^{-1}\) is the inverse permutation of \(\tau\).
</p>

<p>Define \(\displaystyle P(m) = \sum_{k=1}^{m!} \text{rank}(\pi^k)\), where \(\pi^k\) is the permutation arising from applying \(\pi\) \(k\) times.
For example, \(P(2) = 4\), \(P(3) = 780\) and \(P(4) = 38810300\).
</p>

<p>Find \(P(100)\). Give your answer modulo \((10^9 + 7)\).
</p>

<footer>
    <div class="footer-content">
        <p>探索知识的无限可能，尽在我们的网站。无论是通过科学计算器解决复杂数学问题，还是在刷题挑战中提升解题技能，我们提供全面的学习工具。加入我们的讨论区，与志同道合的朋友交流思想，共同进步。关注热门榜，把握最新的学习动态和趋势。拓展视野，通过其他相关网站发现更多资源。最后，不要忘记访问您的个人中心，管理您的学习旅程和成就。我们致力于构建一个互动、互助的学习环境，让您的每一次访问都充满价值。</p>
        <p>&copy; Mathnexus designed by Double JI</p>
    </div>
</footer>
</body>
</html>